<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
	"http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">

<struts-config>

	<!-- ========== Data Source Configuration ============================= -->
	<data-sources />

	<!-- ========== Form Bean Definitions ================================= -->
	<form-beans>

		<form-bean name="UserLogonForm" type="fr.umlv.desperados.struts.form.UserLogonForm" />

		<form-bean name="StudentLogonForm" type="fr.umlv.desperados.struts.form.StudentLogonForm" />

		<form-bean name="UserForm" type="fr.umlv.desperados.struts.form.UserForm" />

		<form-bean name="SearchUserForm" type="fr.umlv.desperados.struts.form.SearchUserForm" />
		
		<form-bean name="SetStyleSheetForm" type="fr.umlv.desperados.struts.form.SetStyleSheetForm" />
		
		<form-bean name="UploadStyleSheetForm" type="fr.umlv.desperados.struts.form.UploadStyleSheetForm" />

		<form-bean name="RdvTackingForm" type="fr.umlv.desperados.struts.form.RdvTackingForm" />
		
		<form-bean name="PlanningConfForm" type="fr.umlv.desperados.struts.form.PlanningConfForm" />
		
		<form-bean name="StatsForm" type="fr.umlv.desperados.struts.form.StatsForm" />
	</form-beans>

	<!-- ========== Global Exception Definitions ========================== -->
	<global-exceptions />

	<!-- ========== Global Forward Definitions ============================ -->
	<global-forwards>
		<forward 	name="logon"			path="user.logon" />
		<forward	name="ident"			path="student.ident" />
		<forward 	name="edituser"			path="admin.edit.user" />
		<forward 	name="error"			path="common.operation.error" />
		<forward	name="success"			path="common.operation.ok" />
		<forward	name="userhome"			path="user.home" />
		<forward	name="studenthome"		path="student.home" />
		<forward	name="searchuser"		path="admin.search.user" />
		<forward	name="searchstudent"	path="user.search.student" />
	</global-forwards>

	<!-- ========== Action Mapping Definitions ============================ -->
	<action-mappings>

		<action path="/confPlanning" forward="planning.configure"/>
		<action path="/takeRdv"	forward="student.rdv"/>

		<action path="/loginPage"				forward="user.logon" />
		<action path="/identPage"				forward="student.ident" />
		<action path="/home/user"				forward="userhome" />
		<action path="/home/student"			forward="studenthome" />

		<action
			path="/userLogon"
			type="fr.umlv.desperados.struts.action.UserLogonAction"
			name="UserLogonForm"
			scope="request"
			input="/pages/form/UserLogon.jsp"
			validate="false">
		</action>

		<action
			path="/userLogoff"
			type="fr.umlv.desperados.struts.action.UserLogoffAction">
		</action>

		<action
			path="/edit/user"
			type="fr.umlv.desperados.struts.action.EditUserAction"
			attribute="UserForm"
			scope="request"
			input="/pages/form/UserDetails.jsp"
			validate="false">
		</action>

		<action
			path="/save/user"
			type="fr.umlv.desperados.struts.action.SaveUserAction"
			attribute="UserForm"
			name="UserForm"
			scope="request"
			input="/pages/form/UserDetails.jsp"
			validate="false">
		</action>

		<action
			path="/search"
			type="fr.umlv.desperados.struts.action.SearchAction">
		</action>

		<action
			path="/search/user"
			type="fr.umlv.desperados.struts.action.SearchUserAction"
			attribute="SearchUserForm"
			name="SearchUserForm"
			scope="request"
			input="/pages/form/SearchUser.jsp"
			validate="false">
		</action>
		
		<action
			path="/take/rdv"
			type="fr.umlv.desperados.struts.action.TakeRdvAction"
			attribute="RdvTackingForm"
			name="RdvTackingForm"
			scope="request"
			input="/pages/form/takeRdv.jsp"
			validate="false">
		</action>

		<action
			path="/cancel/rdv"
			type="fr.umlv.desperados.struts.action.CancelRdvAction"
			scope="request"
			input="/pages/form/cancelRdv.jsp"
			validate="false">
		</action>

		<action
			path="/setupConf"
			type="fr.umlv.desperados.struts.action.SetupPlanningAction"
			scope="request"
			attribute="PlanningConfForm"
			name="PlanningConfForm"
			input="/pages/form/setupPlanning.jsp"
			validate="false">
		</action>

	
		<action
			path="/printInscriptionFile"
			type="fr.umlv.desperados.struts.action.PrintInscriptionFileAction">
		</action>

		<action
			path="/list/styleSheet"
			type="fr.umlv.desperados.struts.action.ListStyleSheetAction">
			<forward name="success" path="admin.stylesheet.list" />
		</action>
		
		<action
			path="/set/StyleSheet"
			type="fr.umlv.desperados.struts.action.SetStyleSheetAction"
			attribute="SetStyleSheetForm"
			name="SetStyleSheetForm"
			scope="request"
			input="/pages/form/ListStyleSheet.jsp"
			validate="false">
		</action>

		<action
			path="/add/styleSheet"
			type="fr.umlv.desperados.struts.action.AddStyleSheetAction"
			attribute="UploadtStyleSheetForm"
			name="UploadStyleSheetForm"
			scope="request"
			input="/pages/form/ListStyleSheet.jsp"
			validate="false">
		</action>
		
		<action
			path="/remove/styleSheet"
			type="fr.umlv.desperados.struts.action.RemoveStyleSheetAction"
			attribute="SetStyleSheetForm"
			name="SetStyleSheetForm"
			scope="request"
			input="/pages/form/ListStyleSheet.jsp"
			validate="false">
		</action>

		<action
			path="/studentLogon"
			type="fr.umlv.desperados.struts.action.StudentLogonAction"
			name="StudentLogonForm"
			scope="request"
			input="/pages/form/StudentLogon.jsp"
			validate="false">
		</action>

		<action
			path="/studentLogoff"
			type="fr.umlv.desperados.struts.action.StudentLogoffAction">
		</action>
		
		<action
        	path="/list/diploma"
        	type="fr.umlv.desperados.struts.action.ListDiplomaAction">
            <forward name="success" path="user.stats" />
        </action>
        
        <action
            path="/stats"
            type="fr.umlv.desperados.struts.action.ViewStatsAction"
            input="/pages/form/stats.jsp"
            name="StatsForm"
            attribute="StatsForm"
            validate="false">
            <forward name="success" path="user.stats.result" />
        </action>

	</action-mappings>

	<!-- ========== Controller Configuration ============================== -->
	<controller
		bufferSize="4096"
		contentType="text/html"
		debug="0"
		locale="false"
		maxFileSize="250M"
		multipartClass="org.apache.struts.upload.CommonsMultipartRequestHandler"
		nocache="false"
		processorClass="org.apache.struts.action.RequestProcessor"
		inputForward="false" />

	<!-- ========== Message Resources Definitions ========================= -->
	<message-resources
		factory="org.apache.struts.util.PropertyMessageResourcesFactory"
		key="org.apache.struts.action.MESSAGE"
		null="false"
		parameter="fr.umlv.desperados.struts.ApplicationResources" />

	<!-- ========== Plug Ins Configuration ================================ -->
	<plug-in className="org.apache.struts.tiles.TilesPlugin">
		<set-property property="definitions-config"
					value="/WEB-INF/tiles-definitions.xml" />
		<set-property property="definitions-parser-validate"
					value="true" />
	</plug-in>

	<plug-in className="fr.umlv.desperados.struts.plugin.PrefsPlugin">
		<set-property property="confPath"
					value="/WEB-INF/mail-conf.xml" />
	</plug-in>

	<plug-in className="fr.umlv.desperados.struts.plugin.InitManagersPlugin" />

</struts-config>